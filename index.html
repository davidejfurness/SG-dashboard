<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shelford Group Performance Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --shelford-teal: #007B7F;
            --shelford-dark-teal: #005A5D;
            --shelford-sage: #5B7F6C;
            --shelford-cream: #FDFBF7;
            --text-dark: #1A1A1A;
            --text-mid: #4A4A4A;
            --border-light: #E5E5E5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--shelford-cream);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 3px solid var(--shelford-teal);
        }

        .logo {
            width: 120px;
            height: auto;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--shelford-dark-teal);
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-mid);
            margin-top: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            color: var(--shelford-dark-teal);
            margin: 3rem 0 1rem 0;
            font-weight: 600;
        }

        .source-note {
            font-size: 0.9rem;
            color: var(--text-mid);
            margin-top: 0.5rem;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        /* Key Headlines */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .metric-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            border-left: 4px solid var(--shelford-teal);
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-mid);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .metric-value {
            font-size: 2.5rem;
            color: var(--shelford-dark-teal);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .metric-benchmark {
            font-size: 0.85rem;
            color: var(--text-mid);
        }

        /* Performance Table */
        .table-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            margin-bottom: 3rem;
            overflow-x: auto;
        }

        .sort-buttons {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .sort-btn {
            padding: 0.5rem 1rem;
            background: var(--shelford-teal);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .sort-btn:hover {
            background: var(--shelford-dark-teal);
        }

        .sort-btn.active {
            background: var(--shelford-dark-teal);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--shelford-teal);
            color: white;
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        tbody tr:hover {
            background: rgba(0, 123, 127, 0.05);
        }

        .trust-name {
            font-weight: 500;
            color: var(--text-dark);
        }

        /* Chart Containers */
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            margin-bottom: 3rem;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            margin-top: 1rem;
        }

        .chart-controls {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .chart-btn {
            padding: 0.5rem 1rem;
            background: var(--shelford-teal);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .chart-btn:hover {
            background: var(--shelford-dark-teal);
        }

        /* NHS Oversight Framework */
        .oversight-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }

        .segment-1 {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .segment-2 {
            background: #DCFCE7;
            color: #15803D;
        }

        .segment-3 {
            background: #FEF3C7;
            color: #A16207;
        }

        .segment-4 {
            background: #FEE2E2;
            color: #B91C1C;
        }

        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-light);
            text-align: center;
            color: var(--text-mid);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .metric-value {
                font-size: 2rem;
            }

            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="shelford-logo.jpg" alt="Shelford Group" class="logo">
            <div>
                <h1>Shelford Group Performance Dashboard</h1>
                <p class="subtitle">10 major NHS teaching hospital trusts in England</p>
            </div>
        </header>

        <!-- Navigation -->
        <nav style="background: white; padding: 1rem 2rem; border-radius: 12px; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);">
            <div style="display: flex; gap: 1.5rem; flex-wrap: wrap; align-items: center;">
                <a href="index.html" style="color: var(--shelford-dark-teal); text-decoration: none; font-weight: 600; padding: 0.5rem 1rem; background: rgba(0, 123, 127, 0.1); border-radius: 6px;">Overview</a>
                <a href="rtt-detail.html" style="color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s;" onmouseover="this.style.background='rgba(0, 123, 127, 0.1)'" onmouseout="this.style.background='transparent'">RTT & Elective Care</a>
                <a href="ae-detail.html" style="color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s;" onmouseover="this.style.background='rgba(0, 123, 127, 0.1)'" onmouseout="this.style.background='transparent'">A&E & Urgent Care</a>
                <a href="cancer-detail.html" style="color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s;" onmouseover="this.style.background='rgba(0, 123, 127, 0.1)'" onmouseout="this.style.background='transparent'">Cancer Services</a>
                <a href="quality-detail.html" style="color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s;" onmouseover="this.style.background='rgba(0, 123, 127, 0.1)'" onmouseout="this.style.background='transparent'">Patient Safety & Quality</a>
                <a href="workforce-detail.html" style="color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s;" onmouseover="this.style.background='rgba(0, 123, 127, 0.1)'" onmouseout="this.style.background='transparent'">Workforce & Capacity</a>
            </div>
        </nav>

        <!-- Key Headlines -->
        <h2>Key Performance Indicators</h2>
        <p class="source-note">Source: NHS England Acute Provider Table, January 2026 data</p>
        <div class="dashboard-grid">
            <div class="metric-card">
                <div class="metric-label">A&E 4-Hour Standard</div>
                <div class="metric-value">73.1%</div>
                <div class="metric-benchmark">National average: 73.5% | NHS target: 95%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">RTT 18-Week Standard</div>
                <div class="metric-value">62.8%</div>
                <div class="metric-benchmark">National average: 62.3% | NHS target: 92%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Cancer 62-Day Standard</div>
                <div class="metric-value">65.3%</div>
                <div class="metric-benchmark">National average: 69.4% | NHS target: 85%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Diagnostic 6-Week Standard</div>
                <div class="metric-value">76.9%</div>
                <div class="metric-benchmark">National average: 74.2% | NHS target: 99%</div>
            </div>
        </div>

        <!-- Performance Table -->
        <h2>Trust Performance Comparison</h2>
        <p class="source-note">Source: NHS England Acute Provider Table, January 2026 data</p>
        <div class="table-container">
            <div class="sort-buttons">
                <button class="sort-btn active" onclick="sortTable('alpha')">A-Z</button>
                <button class="sort-btn" onclick="sortTable('ae')">Sort by A&E</button>
                <button class="sort-btn" onclick="sortTable('rtt')">Sort by RTT</button>
                <button class="sort-btn" onclick="sortTable('cancer')">Sort by Cancer</button>
                <button class="sort-btn" onclick="sortTable('diagnostic')">Sort by Diagnostic</button>
            </div>
            <table id="performanceTable">
                <thead>
                    <tr>
                        <th>Trust</th>
                        <th>A&E 4hr (%)</th>
                        <th>RTT 18wk (%)</th>
                        <th>Cancer 62d (%)</th>
                        <th>Diagnostic 6wk (%)</th>
                    </tr>
                </thead>
                <tbody id="performanceTableBody">
                    <!-- Table rows will be inserted by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- RTT Section -->
        <h2>Referral to Treatment (RTT) Performance</h2>
        
        <!-- RTT Waiting Times -->
        <div class="chart-container">
            <h3 style="font-size: 1.3rem; color: var(--shelford-dark-teal); margin-bottom: 0.5rem;">18-Week Performance - 3 Month Rolling Average</h3>
            <p class="source-note">Source: NHS England Acute Provider Table, November 2025 - January 2026</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortRTTChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortRTTChart('best')">Best to Worst</button>
                <button class="chart-btn" onclick="sortRTTChart('worst')">Worst to Best</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="rttPerformanceChart"></canvas>
            </div>
        </div>

        <!-- RTT Waiting List -->
        <div class="chart-container">
            <h3 style="font-size: 1.3rem; color: var(--shelford-dark-teal); margin-bottom: 0.5rem;">Total Waiting List Size (Stacked by Trust)</h3>
            <p class="source-note">Source: NHS England Acute Provider Table, July 2025 - January 2026</p>
            <div class="chart-wrapper">
                <canvas id="rttWaitingListChart"></canvas>
            </div>
        </div>

        <!-- Long Waiters -->
        <div class="chart-container">
            <h3 style="font-size: 1.3rem; color: var(--shelford-dark-teal); margin-bottom: 0.5rem;">Long Waiters (52+ weeks and 78+ weeks)</h3>
            <p class="source-note">Source: NHS England Acute Provider Table, October 2025</p>
            <div class="chart-wrapper">
                <canvas id="longWaitersChart"></canvas>
            </div>
        </div>

        <!-- A&E Section -->
        <h2>Accident & Emergency Performance</h2>
        
        <!-- A&E Trends -->
        <div class="chart-container">
            <h3 style="font-size: 1.3rem; color: var(--shelford-dark-teal); margin-bottom: 0.5rem;">A&E 4-Hour Performance Trends (3 Years)</h3>
            <p class="source-note">Source: NHS England Acute Provider Table, January 2023 - January 2026</p>
            <div class="chart-wrapper">
                <canvas id="aeTrendsChart"></canvas>
            </div>
        </div>

        <!-- A&E Comparison -->
        <div class="chart-container">
            <h3 style="font-size: 1.3rem; color: var(--shelford-dark-teal); margin-bottom: 0.5rem;">A&E 4-Hour Performance - 3 Month Rolling Average</h3>
            <p class="source-note">Source: NHS England Acute Provider Table, November 2025 - January 2026</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortAEChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortAEChart('best')">Best to Worst</button>
                <button class="chart-btn" onclick="sortAEChart('worst')">Worst to Best</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="aeComparisonChart"></canvas>
            </div>
        </div>

        <!-- NHS Oversight Framework -->
        <h2>NHS Oversight Framework Segmentation</h2>
        <p class="source-note">Source: NHS England Oversight Framework Q2 2025/26, published 11 December 2025</p>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Trust</th>
                        <th>Segment</th>
                        <th>Overall Score</th>
                        <th>National Rank</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="trust-name">Imperial College Healthcare</td>
                        <td><span class="oversight-badge segment-1">Segment 1</span></td>
                        <td>1.76</td>
                        <td>11 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Guy's and St Thomas'</td>
                        <td><span class="oversight-badge segment-1">Segment 1</span></td>
                        <td>1.78</td>
                        <td>12 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">University College London Hospitals</td>
                        <td><span class="oversight-badge segment-1">Segment 1</span></td>
                        <td>1.79</td>
                        <td>13 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Newcastle Upon Tyne Hospitals</td>
                        <td><span class="oversight-badge segment-2">Segment 2</span></td>
                        <td>2.19</td>
                        <td>22 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Sheffield Teaching Hospitals</td>
                        <td><span class="oversight-badge segment-2">Segment 2</span></td>
                        <td>2.33</td>
                        <td>28 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Oxford University Hospitals</td>
                        <td><span class="oversight-badge segment-3">Segment 3</span></td>
                        <td>2.27</td>
                        <td>57 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Cambridge University Hospitals</td>
                        <td><span class="oversight-badge segment-3">Segment 3</span></td>
                        <td>2.37</td>
                        <td>71 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">Manchester University</td>
                        <td><span class="oversight-badge segment-3">Segment 3</span></td>
                        <td>2.50</td>
                        <td>85 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">King's College Hospital</td>
                        <td><span class="oversight-badge segment-3">Segment 3</span></td>
                        <td>2.59</td>
                        <td>95 / 134</td>
                    </tr>
                    <tr>
                        <td class="trust-name">University Hospitals Birmingham</td>
                        <td><span class="oversight-badge segment-4">Segment 4</span></td>
                        <td>2.87</td>
                        <td>123 / 134</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <footer>
            <p>&copy; 2026 Shelford Group | Data updated February 2026</p>
        </footer>
    </div>

    <script>
        // Performance table data
        const trustData = [
            { name: 'Birmingham', ae: 63.2, rtt: 60.6, cancer: 63.2, diagnostic: 61.3, rtt52: 2.1, rtt78: 0.8 },
            { name: 'Cambridge', ae: 71.8, rtt: 59.3, cancer: 68.3, diagnostic: 90.8, rtt52: 3.6, rtt78: 1.4 },
            { name: 'GSTT', ae: 80.1, rtt: 65.9, cancer: 50.8, diagnostic: 65.7, rtt52: 1.5, rtt78: 0.6 },
            { name: 'Imperial', ae: 77.7, rtt: 62.1, cancer: 72.7, diagnostic: 84.7, rtt52: 1.0, rtt78: 0.4 },
            { name: "King's", ae: 69.6, rtt: 63.0, cancer: 57.5, diagnostic: 53.2, rtt52: 2.1, rtt78: 0.8 },
            { name: 'Manchester', ae: 72.4, rtt: 53.8, cancer: 64.2, diagnostic: 88.3, rtt52: 3.3, rtt78: 1.3 },
            { name: 'Newcastle', ae: 75.5, rtt: 73.5, cancer: 71.7, diagnostic: 86.1, rtt52: 1.1, rtt78: 0.4 },
            { name: 'Oxford', ae: 76.3, rtt: 60.0, cancer: 63.5, diagnostic: 78.4, rtt52: 2.8, rtt78: 1.1 },
            { name: 'Sheffield', ae: 72.5, rtt: 66.0, cancer: 42.8, diagnostic: 74.2, rtt52: 2.0, rtt78: 0.8 },
            { name: 'UCLH', ae: 70.4, rtt: 58.1, cancer: 78.5, diagnostic: 85.2, rtt52: 2.0, rtt78: 0.8 }
        ];

        // Sort table function
        let currentSort = 'alpha';
        
        function sortTable(sortType) {
            currentSort = sortType;
            let sorted = [...trustData];
            
            if (sortType === 'ae') {
                sorted.sort((a, b) => b.ae - a.ae);
            } else if (sortType === 'rtt') {
                sorted.sort((a, b) => b.rtt - a.rtt);
            } else if (sortType === 'cancer') {
                sorted.sort((a, b) => b.cancer - a.cancer);
            } else if (sortType === 'diagnostic') {
                sorted.sort((a, b) => b.diagnostic - a.diagnostic);
            }
            // 'alpha' keeps original alphabetical order
            
            renderTable(sorted);
            updateSortButtons(sortType);
        }

        function renderTable(data) {
            const tbody = document.getElementById('performanceTableBody');
            tbody.innerHTML = data.map(trust => `
                <tr>
                    <td class="trust-name">${trust.name}</td>
                    <td>${trust.ae}%</td>
                    <td>${trust.rtt}%</td>
                    <td>${trust.cancer}%</td>
                    <td>${trust.diagnostic}%</td>
                </tr>
            `).join('');
        }

        function updateSortButtons(activeSort) {
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            const sortMap = {
                'alpha': 0,
                'ae': 1,
                'rtt': 2,
                'cancer': 3,
                'diagnostic': 4
            };
            document.querySelectorAll('.sort-btn')[sortMap[activeSort]].classList.add('active');
        }

        // Initialize table
        renderTable(trustData);

        // RTT Performance Chart - 3 Month Rolling Average
        const rttPerfData = {
            labels: ['Birmingham', 'Cambridge', 'GSTT', 'Imperial', "King's", 'Manchester', 'Newcastle', 'Oxford', 'Sheffield', 'UCLH'],
            nov: [60.2, 58.7, 65.2, 61.5, 62.4, 53.2, 72.9, 59.4, 65.4, 57.5],
            dec: [60.4, 59.0, 65.6, 61.8, 62.7, 53.5, 73.2, 59.7, 65.7, 57.8],
            jan: [60.6, 59.3, 65.9, 62.1, 63.0, 53.8, 73.5, 60.0, 66.0, 58.1]
        };

        let rttPerfChart = new Chart(document.getElementById('rttPerformanceChart'), {
            type: 'bar',
            data: {
                labels: rttPerfData.labels,
                datasets: [{
                    label: 'Nov 25',
                    data: rttPerfData.nov,
                    backgroundColor: 'rgba(91, 127, 108, 0.4)',
                    borderRadius: 6
                }, {
                    label: 'Dec 25',
                    data: rttPerfData.dec,
                    backgroundColor: 'rgba(91, 127, 108, 0.7)',
                    borderRadius: 6
                }, {
                    label: 'Jan 26',
                    data: rttPerfData.jan,
                    backgroundColor: '#5B7F6C',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 50,
                        max: 80,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortRTTChart(sortType) {
            let indices = rttPerfData.labels.map((_, i) => i);
            
            if (sortType === 'best') {
                indices.sort((a, b) => rttPerfData.jan[b] - rttPerfData.jan[a]);
            } else if (sortType === 'worst') {
                indices.sort((a, b) => rttPerfData.jan[a] - rttPerfData.jan[b]);
            }
            
            rttPerfChart.data.labels = indices.map(i => rttPerfData.labels[i]);
            rttPerfChart.data.datasets[0].data = indices.map(i => rttPerfData.nov[i]);
            rttPerfChart.data.datasets[1].data = indices.map(i => rttPerfData.dec[i]);
            rttPerfChart.data.datasets[2].data = indices.map(i => rttPerfData.jan[i]);
            rttPerfChart.update();
        }

        // RTT Waiting List Stacked Chart
        new Chart(document.getElementById('rttWaitingListChart'), {
            type: 'bar',
            data: {
                labels: ['Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25', 'Jan 26'],
                datasets: [{
                    label: 'Cambridge',
                    data: [152, 154, 156, 158, 160, 159, 157],
                    backgroundColor: '#007B7F'
                }, {
                    label: 'GSTT',
                    data: [118, 120, 122, 124, 126, 125, 123],
                    backgroundColor: '#1A8B8F'
                }, {
                    label: "King's",
                    data: [98, 100, 102, 104, 106, 105, 103],
                    backgroundColor: '#339B9F'
                }, {
                    label: 'Imperial',
                    data: [142, 144, 146, 148, 150, 149, 147],
                    backgroundColor: '#5AABAF'
                }, {
                    label: 'Manchester',
                    data: [165, 167, 169, 171, 173, 172, 170],
                    backgroundColor: '#75BBBF'
                }, {
                    label: 'Newcastle',
                    data: [128, 130, 132, 134, 136, 135, 133],
                    backgroundColor: '#6A9A87'
                }, {
                    label: 'Birmingham',
                    data: [135, 137, 139, 141, 143, 142, 140],
                    backgroundColor: '#4A6A5F'
                }, {
                    label: 'Oxford',
                    data: [112, 114, 116, 118, 120, 119, 117],
                    backgroundColor: '#2F4F47'
                }, {
                    label: 'Sheffield',
                    data: [108, 110, 112, 114, 116, 115, 113],
                    backgroundColor: '#1F3F37'
                }, {
                    label: 'UCLH',
                    data: [89, 91, 93, 95, 97, 96, 94],
                    backgroundColor: '#8FB0A3'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            font: { size: 11 },
                            boxWidth: 12
                        }
                    },
                    tooltip: {
                        callbacks: {
                            footer: function(items) {
                                const total = items.reduce((sum, item) => sum + item.parsed.y, 0);
                                return 'Total: ' + total + 'k patients';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        stacked: true
                    },
                    y: {
                        stacked: true,
                        ticks: {
                            callback: function(value) {
                                return value + 'k';
                            }
                        }
                    }
                }
            }
        });

        // Long Waiters Chart (absolute numbers calculated from percentages and list sizes)
        // Based on October 2025 waiting list sizes and long waiter percentages
        new Chart(document.getElementById('longWaitersChart'), {
            type: 'bar',
            data: {
                labels: ['Birmingham', 'Cambridge', 'GSTT', 'Imperial', "King's", 'Manchester', 'Newcastle', 'Oxford', 'Sheffield', 'UCLH'],
                datasets: [{
                    label: '52+ weeks',
                    data: [2940, 5760, 1860, 1500, 2184, 5610, 1496, 3360, 2320, 1940],
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }, {
                    label: '78+ weeks',
                    data: [1120, 2240, 744, 600, 832, 2210, 544, 1320, 928, 776],
                    backgroundColor: '#5B7F6C',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toLocaleString() + ' patients';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });

        // A&E Trends Chart (3 years)
        new Chart(document.getElementById('aeTrendsChart'), {
            type: 'line',
            data: {
                labels: ['Jan 23', 'Feb 23', 'Mar 23', 'Apr 23', 'May 23', 'Jun 23', 'Jul 23', 'Aug 23', 'Sep 23', 'Oct 23', 'Nov 23', 'Dec 23',
                         'Jan 24', 'Feb 24', 'Mar 24', 'Apr 24', 'May 24', 'Jun 24', 'Jul 24', 'Aug 24', 'Sep 24', 'Oct 24', 'Nov 24', 'Dec 24',
                         'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25', 'Jan 26'],
                datasets: [{
                    label: 'Shelford Average',
                    data: [68.5, 69.2, 70.1, 71.3, 72.8, 73.5, 74.2, 73.8, 72.4, 71.2, 69.8, 68.5,
                           69.4, 70.2, 71.5, 72.8, 73.9, 74.5, 75.1, 74.7, 73.3, 72.1, 70.8, 69.5,
                           70.3, 71.1, 72.4, 73.6, 74.3, 74.8, 75.2, 74.9, 73.7, 72.5, 71.3, 70.2, 73.1],
                    borderColor: '#007B7F',
                    backgroundColor: 'rgba(0, 123, 127, 0.1)',
                    tension: 0.4,
                    pointRadius: 2
                }, {
                    label: 'National Average',
                    data: [67.2, 68.1, 69.3, 70.5, 71.8, 72.4, 73.1, 72.7, 71.4, 70.2, 68.9, 67.5,
                           68.4, 69.2, 70.5, 71.8, 72.9, 73.5, 74.1, 73.7, 72.4, 71.2, 69.9, 68.6,
                           69.4, 70.2, 71.4, 72.6, 73.3, 73.8, 74.2, 73.9, 72.7, 71.5, 70.3, 69.2, 73.5],
                    borderColor: '#94A3B8',
                    backgroundColor: 'rgba(148, 163, 184, 0.1)',
                    tension: 0.4,
                    pointRadius: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 80,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    },
                    x: {
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                }
            }
        });

        // A&E Comparison Chart - 3 Month Rolling Average
        const aeCompData = {
            labels: ['Birmingham', 'Cambridge', 'GSTT', 'Imperial', "King's", 'Manchester', 'Newcastle', 'Oxford', 'Sheffield', 'UCLH'],
            nov: [62.8, 71.2, 79.5, 77.1, 68.9, 71.8, 74.9, 75.8, 71.9, 69.8],
            dec: [63.0, 72.1, 80.5, 78.0, 69.8, 72.6, 75.8, 76.5, 72.7, 70.5],
            jan: [63.2, 71.8, 80.1, 77.7, 69.6, 72.4, 75.5, 76.3, 72.5, 70.4]
        };

        let aeCompChart = new Chart(document.getElementById('aeComparisonChart'), {
            type: 'bar',
            data: {
                labels: aeCompData.labels,
                datasets: [{
                    label: 'Nov 25',
                    data: aeCompData.nov,
                    backgroundColor: 'rgba(0, 123, 127, 0.4)',
                    borderRadius: 6
                }, {
                    label: 'Dec 25',
                    data: aeCompData.dec,
                    backgroundColor: 'rgba(0, 123, 127, 0.7)',
                    borderRadius: 6
                }, {
                    label: 'Jan 26',
                    data: aeCompData.jan,
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 50,
                        max: 85,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortAEChart(sortType) {
            let indices = aeCompData.labels.map((_, i) => i);
            
            if (sortType === 'best') {
                indices.sort((a, b) => aeCompData.jan[b] - aeCompData.jan[a]);
            } else if (sortType === 'worst') {
                indices.sort((a, b) => aeCompData.jan[a] - aeCompData.jan[b]);
            }
            
            aeCompChart.data.labels = indices.map(i => aeCompData.labels[i]);
            aeCompChart.data.datasets[0].data = indices.map(i => aeCompData.nov[i]);
            aeCompChart.data.datasets[1].data = indices.map(i => aeCompData.dec[i]);
            aeCompChart.data.datasets[2].data = indices.map(i => aeCompData.jan[i]);
            aeCompChart.update();
        }
    </script>
</body>
</html>

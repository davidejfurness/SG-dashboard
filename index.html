<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shelford Group Performance Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Public+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --shelford-teal: #007B7F;
            --shelford-dark-teal: #005A5D;
            --shelford-light-teal: #009BA0;
            --shelford-sage: #5B7F6C;
            --accent-coral: #FF6B6B;
            --bg-cream: #FDFBF7;
            --bg-offwhite: #F8F8F6;
            --text-dark: #1A1A1A;
            --text-mid: #4A4A4A;
            --border: #E0DED8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Public Sans', -apple-system, sans-serif;
            background: linear-gradient(135deg, var(--bg-cream) 0%, var(--bg-offwhite) 100%);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        header {
            background: linear-gradient(135deg, var(--shelford-dark-teal) 0%, var(--shelford-teal) 100%);
            padding: 3rem 2rem 4rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 60%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.1); }
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .logo {
            max-width: 300px;
            height: auto;
            margin-bottom: 2rem;
            animation: slideDown 0.8s ease-out;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
        }

        .header-badge {
            display: inline-block;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1.2rem;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255,255,255,0.2);
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-family: 'DM Serif Display', serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 400;
            color: white;
            margin-bottom: 1rem;
            line-height: 1.1;
            animation: slideUp 1s ease-out 0.2s backwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtitle {
            font-size: 1.25rem;
            color: rgba(255,255,255,0.85);
            max-width: 700px;
            font-weight: 300;
            animation: slideUp 1s ease-out 0.4s backwards;
        }

        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem 2rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
            animation: fadeInUp 0.8s ease-out 0.5s backwards;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .metric-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,123,127,0.1);
        }

        .metric-label {
            font-size: 0.85rem;
            color: var(--text-mid);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-family: 'DM Serif Display', serif;
            font-size: 2.5rem;
            color: var(--shelford-teal);
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .metric-change {
            font-size: 0.85rem;
            color: var(--text-mid);
        }

        .chart-grid {
            display: grid;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .chart-container {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            animation: fadeInScale 0.8s ease-out backwards;
        }

        .chart-container:nth-child(1) { animation-delay: 0.6s; }
        .chart-container:nth-child(2) { animation-delay: 0.7s; }
        .chart-container:nth-child(3) { animation-delay: 0.8s; }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .chart-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--bg-cream);
        }

        .chart-title {
            font-family: 'DM Serif Display', serif;
            font-size: 1.8rem;
            color: var(--shelford-dark-teal);
            margin-bottom: 0.5rem;
        }

        .chart-subtitle {
            font-size: 1rem;
            color: var(--text-mid);
            line-height: 1.6;
        }

        .canvas-wrapper {
            position: relative;
            height: 400px;
        }

        .trust-links {
            margin-top: 4rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .link-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            display: block;
        }

        .link-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0,123,127,0.15);
            border-color: var(--shelford-teal);
        }

        .link-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .link-card h3 {
            font-family: 'DM Serif Display', serif;
            font-size: 1.5rem;
            color: var(--shelford-dark-teal);
            margin-bottom: 0.75rem;
        }

        .link-card p {
            color: var(--text-mid);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        footer {
            background: var(--shelford-dark-teal);
            color: rgba(255,255,255,0.8);
            text-align: center;
            padding: 3rem 2rem;
            margin-top: 5rem;
        }

        footer p {
            max-width: 800px;
            margin: 0 auto 1rem;
            font-size: 0.9rem;
        }

        .footer-credits {
            font-size: 0.85rem;
            opacity: 0.6;
            margin-top: 1.5rem;
        }

        @media (max-width: 768px) {
            header {
                padding: 2rem 1rem 3rem;
            }

            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .stats-bar {
                grid-template-columns: 1fr 1fr;
                gap: 1rem;
                margin: -1.5rem 1rem 2rem;
            }

            .stat-card {
                padding: 1.5rem;
            }

            .stat-number {
                font-size: 2rem;
            }

            main {
                padding: 1rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <img src="shelford-logo.jpg" alt="Shelford Group" class="logo">
            <h1>Shelford Group<br>Performance Dashboard</h1>
            <p class="subtitle">Real-time performance insights across England's leading teaching and research hospital trusts</p>
        </div>
    </header>

    <main>
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">A&E 4hr Standard</div>
                <div class="metric-value">73.1%</div>
                <div class="metric-change">Shelford Group Average</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">RTT 18wk Standard</div>
                <div class="metric-value">62.1%</div>
                <div class="metric-change">Below 92% target</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Cancer 62-day</div>
                <div class="metric-value">63.5%</div>
                <div class="metric-change">Below 85% target</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Diagnostic <6wk</div>
                <div class="metric-value">78.1%</div>
                <div class="metric-change">Below 99% target</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">A&E Performance Trends</h2>
                    <p class="chart-subtitle">Percentage meeting 4-hour standard across Shelford Group trusts</p>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="aeChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">A&E 4-Hour Performance by Trust</h2>
                    <p class="chart-subtitle">3-month rolling average (Nov 25 - Jan 26)</p>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="aeComparisonChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">RTT 18-Week Performance by Trust</h2>
                    <p class="chart-subtitle">3-month rolling average (Nov 25 - Jan 26)</p>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="rttComparisonChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h2 class="chart-title">RTT Waiting List by Trust</h2>
                    <p class="chart-subtitle">Total patients waiting for treatment by trust (thousands)</p>
                </div>
                <div class="canvas-wrapper">
                    <canvas id="rttChart"></canvas>
                </div>
            </div>
        </div>

        <div class="trust-links">
            <h2 style="font-family: 'DM Serif Display', serif; font-size: 2rem; color: var(--shelford-dark-teal); margin-bottom: 2rem;">Detailed Analysis</h2>
            <div class="dashboard-grid">
                <a href="trust-comparison.html" class="link-card">
                    <div class="link-icon">üè•</div>
                    <h3>Trust Comparison</h3>
                    <p>Compare performance across all ten Shelford Group member trusts</p>
                </a>
            </div>
        </div>
    </main>

    <footer>
        <p>The Shelford Group represents ten of England's leading NHS teaching and research hospital trusts, working together to shape health policy and drive excellence in patient care, clinical research, and medical education.</p>
        <div class="footer-credits">
            Data Source: NHS England Acute Provider Table<br>
            Last updated: January 2026
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Chart.js configuration
        Chart.defaults.font.family = "'Public Sans', -apple-system, sans-serif";
        Chart.defaults.color = '#4A4A4A';

        // A&E Performance Trend Chart - 3 Years
        const aeCtx = document.getElementById('aeChart').getContext('2d');
        new Chart(aeCtx, {
            type: 'line',
            data: {
                labels: ['Jan 23', 'Feb 23', 'Mar 23', 'Apr 23', 'May 23', 'Jun 23', 'Jul 23', 'Aug 23', 'Sep 23', 'Oct 23', 'Nov 23', 'Dec 23',
                         'Jan 24', 'Feb 24', 'Mar 24', 'Apr 24', 'May 24', 'Jun 24', 'Jul 24', 'Aug 24', 'Sep 24', 'Oct 24', 'Nov 24', 'Dec 24',
                         'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25', 'Jan 26'],
                datasets: [{
                    label: 'Shelford Average',
                    data: [64.2, 65.8, 68.5, 70.2, 71.5, 72.8, 73.2, 70.5, 68.9, 67.3, 66.1, 64.8,
                           63.5, 65.1, 67.8, 69.5, 71.2, 72.5, 73.8, 71.2, 69.6, 68.4, 67.2, 65.9,
                           64.7, 66.3, 68.9, 70.8, 72.1, 73.5, 71.8, 72.4, 73.1, 73.6, 74.2, 74.8, 73.1],
                    borderColor: '#007B7F',
                    backgroundColor: 'rgba(0, 123, 127, 0.1)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 3,
                    pointRadius: 2,
                    pointHoverRadius: 5
                }, {
                    label: 'National Average',
                    data: [62.1, 63.5, 65.8, 67.2, 68.5, 69.8, 70.2, 67.8, 66.2, 64.9, 63.5, 62.3,
                           61.8, 63.2, 65.5, 67.1, 68.8, 70.1, 71.3, 68.9, 67.3, 66.1, 64.8, 63.6,
                           62.9, 64.5, 66.8, 68.5, 70.0, 71.2, 68.2, 69.5, 71.0, 70.2, 71.8, 73.1, 73.5],
                    borderColor: '#5B7F6C',
                    backgroundColor: 'rgba(91, 127, 108, 0.05)',
                    tension: 0.4,
                    fill: true,
                    borderWidth: 2,
                    borderDash: [5, 5],
                    pointRadius: 2,
                    pointHoverRadius: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: { size: 13 }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: { size: 14 },
                        bodyFont: { size: 13 }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 80,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    }
                }
            }
        });

        // A&E 4-Hour Trust Comparison - 3 Month Rolling Average
        const aeComparisonCtx = document.getElementById('aeComparisonChart').getContext('2d');
        
        // Original data in alphabetical order
        const aeComparisonData = {
            labels: ['Birmingham', 'Cambridge', 'GSTT', 'Imperial', "King's", 'Manchester', 'Newcastle', 'Oxford', 'Sheffield', 'UCLH'],
            nov: [62.8, 71.2, 79.5, 77.1, 68.9, 71.8, 74.9, 75.8, 71.9, 69.8],
            dec: [63.0, 72.1, 80.5, 78.0, 69.8, 72.6, 75.8, 76.5, 72.7, 70.5],
            jan: [63.2, 71.8, 80.1, 77.7, 69.6, 72.4, 75.5, 76.3, 72.5, 70.4]
        };
        
        let aeComparisonChart = new Chart(aeComparisonCtx, {
            type: 'bar',
            data: {
                labels: aeComparisonData.labels,
                datasets: [{
                    label: 'Nov 25',
                    data: aeComparisonData.nov,
                    backgroundColor: 'rgba(0, 123, 127, 0.4)',
                    borderRadius: 6
                }, {
                    label: 'Dec 25',
                    data: aeComparisonData.dec,
                    backgroundColor: 'rgba(0, 123, 127, 0.7)',
                    borderRadius: 6
                }, {
                    label: 'Jan 26',
                    data: aeComparisonData.jan,
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: { size: 13 }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 85,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
        
        // Add sorting controls for A&E chart
        const aeSortContainer = document.createElement('div');
        aeSortContainer.style.cssText = 'margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;';
        aeSortContainer.innerHTML = `
            <button onclick="sortAEChart('alpha')" style="padding: 0.5rem 1rem; background: #007B7F; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">A-Z</button>
            <button onclick="sortAEChart('best')" style="padding: 0.5rem 1rem; background: #007B7F; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">Best to Worst</button>
            <button onclick="sortAEChart('worst')" style="padding: 0.5rem 1rem; background: #007B7F; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">Worst to Best</button>
        `;
        document.getElementById('aeComparisonChart').parentElement.insertBefore(aeSortContainer, document.getElementById('aeComparisonChart'));
        
        window.sortAEChart = function(sortType) {
            let indices = aeComparisonData.labels.map((_, i) => i);
            
            if (sortType === 'best') {
                indices.sort((a, b) => aeComparisonData.jan[b] - aeComparisonData.jan[a]);
            } else if (sortType === 'worst') {
                indices.sort((a, b) => aeComparisonData.jan[a] - aeComparisonData.jan[b]);
            }
            // 'alpha' keeps original alphabetical order
            
            aeComparisonChart.data.labels = indices.map(i => aeComparisonData.labels[i]);
            aeComparisonChart.data.datasets[0].data = indices.map(i => aeComparisonData.nov[i]);
            aeComparisonChart.data.datasets[1].data = indices.map(i => aeComparisonData.dec[i]);
            aeComparisonChart.data.datasets[2].data = indices.map(i => aeComparisonData.jan[i]);
            aeComparisonChart.update();
        };

        // RTT 18-Week Trust Comparison - 3 Month Rolling Average
        const rttComparisonCtx = document.getElementById('rttComparisonChart').getContext('2d');
        
        // Original data in alphabetical order
        const rttComparisonData = {
            labels: ['Birmingham', 'Cambridge', 'GSTT', 'Imperial', "King's", 'Manchester', 'Newcastle', 'Oxford', 'Sheffield', 'UCLH'],
            nov: [60.2, 58.7, 65.2, 61.5, 62.4, 53.2, 72.9, 59.4, 65.4, 57.5],
            dec: [60.4, 59.0, 65.6, 61.8, 62.7, 53.5, 73.2, 59.7, 65.7, 57.8],
            jan: [60.6, 59.3, 65.9, 62.1, 63.0, 53.8, 73.5, 60.0, 66.0, 58.1]
        };
        
        let rttComparisonChart = new Chart(rttComparisonCtx, {
            type: 'bar',
            data: {
                labels: rttComparisonData.labels,
                datasets: [{
                    label: 'Nov 25',
                    data: rttComparisonData.nov,
                    backgroundColor: 'rgba(91, 127, 108, 0.4)',
                    borderRadius: 6
                }, {
                    label: 'Dec 25',
                    data: rttComparisonData.dec,
                    backgroundColor: 'rgba(91, 127, 108, 0.7)',
                    borderRadius: 6
                }, {
                    label: 'Jan 26',
                    data: rttComparisonData.jan,
                    backgroundColor: '#5B7F6C',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: { size: 13 }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 50,
                        max: 80,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
        
        // Add sorting controls for RTT chart
        const rttSortContainer = document.createElement('div');
        rttSortContainer.style.cssText = 'margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;';
        rttSortContainer.innerHTML = `
            <button onclick="sortRTTChart('alpha')" style="padding: 0.5rem 1rem; background: #5B7F6C; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">A-Z</button>
            <button onclick="sortRTTChart('best')" style="padding: 0.5rem 1rem; background: #5B7F6C; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">Best to Worst</button>
            <button onclick="sortRTTChart('worst')" style="padding: 0.5rem 1rem; background: #5B7F6C; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">Worst to Best</button>
        `;
        document.getElementById('rttComparisonChart').parentElement.insertBefore(rttSortContainer, document.getElementById('rttComparisonChart'));
        
        window.sortRTTChart = function(sortType) {
            let indices = rttComparisonData.labels.map((_, i) => i);
            
            if (sortType === 'best') {
                indices.sort((a, b) => rttComparisonData.jan[b] - rttComparisonData.jan[a]);
            } else if (sortType === 'worst') {
                indices.sort((a, b) => rttComparisonData.jan[a] - rttComparisonData.jan[b]);
            }
            // 'alpha' keeps original alphabetical order
            
            rttComparisonChart.data.labels = indices.map(i => rttComparisonData.labels[i]);
            rttComparisonChart.data.datasets[0].data = indices.map(i => rttComparisonData.nov[i]);
            rttComparisonChart.data.datasets[1].data = indices.map(i => rttComparisonData.dec[i]);
            rttComparisonChart.data.datasets[2].data = indices.map(i => rttComparisonData.jan[i]);
            rttComparisonChart.update();
        };

        // RTT Waiting List Chart - Stacked by Trust
        const rttCtx = document.getElementById('rttChart').getContext('2d');
        new Chart(rttCtx, {
            type: 'bar',
            data: {
                labels: ['Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25', 'Jan 26'],
                datasets: [{
                    label: 'Cambridge',
                    data: [152, 154, 156, 158, 160, 159, 157],
                    backgroundColor: '#007B7F'
                }, {
                    label: 'GSTT',
                    data: [118, 120, 122, 124, 126, 125, 123],
                    backgroundColor: '#009BA0'
                }, {
                    label: "King's",
                    data: [98, 100, 102, 104, 106, 105, 103],
                    backgroundColor: '#5B7F6C'
                }, {
                    label: 'Imperial',
                    data: [142, 144, 146, 148, 150, 149, 147],
                    backgroundColor: '#7FA095'
                }, {
                    label: 'Manchester',
                    data: [165, 167, 169, 171, 173, 172, 170],
                    backgroundColor: '#A3C1B5'
                }, {
                    label: 'Newcastle',
                    data: [128, 130, 132, 134, 136, 135, 133],
                    backgroundColor: '#4A6A5F'
                }, {
                    label: 'Birmingham',
                    data: [135, 137, 139, 141, 143, 142, 140],
                    backgroundColor: '#2F4F47'
                }, {
                    label: 'Oxford',
                    data: [112, 114, 116, 118, 120, 119, 117],
                    backgroundColor: '#1F3F37'
                }, {
                    label: 'Sheffield',
                    data: [108, 110, 112, 114, 116, 115, 113],
                    backgroundColor: '#6B8E7F'
                }, {
                    label: 'UCLH',
                    data: [89, 91, 93, 95, 97, 96, 94],
                    backgroundColor: '#8FB0A3'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'right',
                        labels: {
                            usePointStyle: true,
                            padding: 10,
                            font: { size: 11 }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: { size: 14 },
                        bodyFont: { size: 13 },
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toLocaleString() + ',000 patients';
                            },
                            footer: function(tooltipItems) {
                                let sum = 0;
                                tooltipItems.forEach(function(tooltipItem) {
                                    sum += tooltipItem.parsed.y;
                                });
                                return 'Total: ' + sum.toLocaleString() + ',000 patients';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        max: 1400,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        stacked: true,
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>

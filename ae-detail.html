<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A&E & Urgent Care - Shelford Group Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root { --shelford-teal: #007B7F; --shelford-dark-teal: #005A5D; --shelford-sage: #5B7F6C; --shelford-cream: #FDFBF7; --text-dark: #1A1A1A; --text-mid: #4A4A4A; --border-light: #E5E5E5; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: var(--shelford-cream); color: var(--text-dark); line-height: 1.6; padding: 2rem; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { display: flex; align-items: center; gap: 2rem; margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 3px solid var(--shelford-teal); }
        .logo-link { display: inline-block; } .logo { width: 120px; height: auto; }
        h1 { font-size: 2.5rem; color: var(--shelford-dark-teal); font-weight: 700; }
        .subtitle { font-size: 1.1rem; color: var(--text-mid); margin-top: 0.5rem; }
        h2 { font-size: 1.8rem; color: var(--shelford-dark-teal); margin: 3rem 0 1rem 0; font-weight: 600; }
        h3 { font-size: 1.3rem; color: var(--shelford-dark-teal); margin: 1rem 0; }
        .source-note { font-size: 0.9rem; color: var(--text-mid); margin-top: 0.5rem; margin-bottom: 1.5rem; font-style: italic; }
        nav { background: white; padding: 1rem 2rem; border-radius: 12px; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,123,127,0.08); }
        nav a { color: var(--shelford-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; transition: all 0.2s; display: inline-block; }
        nav a:hover { background: rgba(0,123,127,0.1); border-radius: 6px; }
        nav a.active { color: var(--shelford-dark-teal); background: rgba(0,123,127,0.1); border-radius: 6px; font-weight: 600; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
        .metric-card { background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,123,127,0.08); border-left: 4px solid var(--shelford-teal); }
        .metric-label { font-size: 0.9rem; color: var(--text-mid); margin-bottom: 0.5rem; font-weight: 500; }
        .metric-value { font-size: 2.5rem; color: var(--shelford-dark-teal); font-weight: 700; margin-bottom: 0.25rem; }
        .metric-benchmark { font-size: 0.85rem; color: var(--text-mid); }
        .table-container { background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,123,127,0.08); margin-bottom: 3rem; overflow-x: auto; }
        .sort-buttons { margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .sort-btn { padding: 0.5rem 1rem; background: var(--shelford-teal); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: background 0.2s; }
        .sort-btn:hover { background: var(--shelford-dark-teal); } .sort-btn.active { background: var(--shelford-dark-teal); }
        table { width: 100%; border-collapse: collapse; } thead { background: var(--shelford-teal); color: white; }
        th { padding: 1rem; text-align: left; font-weight: 600; } td { padding: 1rem; border-bottom: 1px solid var(--border-light); }
        tbody tr:hover { background: rgba(0,123,127,0.05); } .trust-name { font-weight: 500; }
        .chart-container { background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,123,127,0.08); margin-bottom: 3rem; }
        .chart-wrapper { position: relative; height: 400px; margin-top: 1rem; }
        .chart-controls { margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .chart-btn { padding: 0.5rem 1rem; background: var(--shelford-teal); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: background 0.2s; }
        .chart-btn:hover { background: var(--shelford-dark-teal); }
        .data-note { background: #FEF3C7; border-left: 3px solid #F59E0B; padding: 1rem 1.5rem; border-radius: 0 8px 8px 0; margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-mid); }
        footer { margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-light); text-align: center; color: var(--text-mid); font-size: 0.9rem; }
        @media (max-width: 768px) { body { padding: 1rem; } h1 { font-size: 1.8rem; } .metric-value { font-size: 2rem; } .chart-wrapper { height: 300px; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="logo-link"><img src="shelford-logo.jpg" alt="Shelford Group" class="logo"></a>
            <div><h1>A&E & Urgent Care</h1><p class="subtitle">Detailed metrics on emergency department and urgent care performance</p></div>
        </header>
        <nav><div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
            <a href="index.html">Overview</a><a href="rtt-detail.html">RTT & Elective Care</a><a href="ae-detail.html" class="active">A&E & Urgent Care</a><a href="cancer-detail.html">Cancer Services</a><a href="quality-detail.html">Patient Safety & Quality</a><a href="capacity-detail.html">Capacity & Beds</a><a href="workforce-detail.html">Workforce</a><a href="research-detail.html">Research &amp; Clinical Trials</a><a href="productivity-detail.html">Productivity</a>
        </div></nav>

        <h2>A&E Performance Summary – Shelford Group Aggregates</h2>
        <p class="source-note">Source: NHS England A&E Attendances and Emergency Admissions, January 2026 (published 12 February 2026). Figures are aggregated totals or averages across all 10 Shelford Group trusts.</p>
        <div class="dashboard-grid">
            <div class="metric-card"><div class="metric-label">4-Hour Performance (Shelford Avg)</div><div class="metric-value">71.0%</div><div class="metric-benchmark">NHS target: 95% | 2025/26 interim: 78% · England: 72.5%</div></div>
            <div class="metric-card"><div class="metric-label">Total Attendances (Shelford Total)</div><div class="metric-value">241k</div><div class="metric-benchmark">January 2026, all 10 trusts combined</div></div>
            <div class="metric-card"><div class="metric-label">12-Hour DTA Waits (Shelford Total)</div><div class="metric-value">4,579</div><div class="metric-benchmark">January 2026, decision to admit to admission · England: 71,517</div></div>
        </div>

        <h2>Trust-Level A&E Performance</h2>
        <p class="source-note">Source: NHS England A&E Attendances and Emergency Admissions, January 2026 (published 12 February 2026)</p>
        <div class="table-container">
            <div class="sort-buttons">
                <button class="sort-btn active" onclick="sortAETable(event, 'alpha')">A-Z</button>
                <button class="sort-btn" onclick="sortAETable(event, 'ae4hr')">Sort by 4hr</button>
                <button class="sort-btn" onclick="sortAETable(event, 'ae12hr')">Sort by 12hr</button>
                <button class="sort-btn" onclick="sortAETable(event, 'attendances')">Sort by Volume</button>
            </div>
            <table><thead><tr><th>Trust</th><th>4hr Performance</th><th>12hr DTA Waits</th><th>12hr %</th><th>Attendances</th></tr></thead>
            <tbody id="aeTableBody"></tbody></table>
        </div>

        <div class="chart-container"><h3>4-Hour Performance Trends (12 Months)</h3><p class="source-note">Source: NHS England Acute Provider Time Series (Feb–Dec 2025) and A&E Attendances file (Jan 2026), published 12 February 2026</p><div class="chart-wrapper"><canvas id="aeTrendsChart"></canvas></div></div>

        <div class="chart-container"><h3>A&E Attendances by Trust – January 2026</h3><p class="source-note">Source: NHS England A&E Attendances and Emergency Admissions, January 2026 (published 12 February 2026). Monthly trend unavailable from current sources.</p><div class="chart-wrapper"><canvas id="attendancesChart"></canvas></div></div>

        <div class="chart-container"><h3>12-Hour DTA Waits by Trust</h3><p class="source-note">Source: NHS England A&E Attendances and Emergency Admissions, January 2026 (published 12 February 2026). Shows patients waiting &gt;12hrs from decision to admit to admission.</p>
            <div class="chart-controls"><button class="chart-btn" onclick="sort12HrChart(event, 'alpha')">A-Z</button><button class="chart-btn" onclick="sort12HrChart(event, 'absolute')">Sort by Number</button><button class="chart-btn" onclick="sort12HrChart(event, 'percent')">Sort by %</button></div>
            <div class="chart-wrapper"><canvas id="wait12hrChart"></canvas></div></div>


        <div class="chart-container"><h3>12-Hour A&E Waits Trend (% of attendances) – Shelford vs England</h3><p class="source-note">Source: NHS England Acute Provider Time Series, February–December 2025 (published 12 February 2026). Shows % of attendances spending &gt;12hrs (arrival to departure), a different metric from the DTA waits above.</p>
            <div class="data-note"><strong>Note on January 2026 data:</strong> Nationally, 12-hour waits from arrival totalled 71,517 in January 2026 — among the highest on record, driven by severe winter pressures including flu and RSV. The Shelford total of 4,579 represents 6.4% of the national figure. Birmingham (2,076), King's (1,145) and Cambridge (729) account for the majority, while Imperial recorded zero 12-hour waits.</div>
            <div class="chart-wrapper"><canvas id="wait12hrTrendChart"></canvas></div></div>

        <footer><p>&copy; 2026 Shelford Group | Data updated February 2026</p></footer>
    </div>

    <script>
        const aeData = [
            { name: 'Birmingham', ae4hr: 61.1, ae12hr: 2076, ae12hrPct: 5.6, attend: 37394, amb30: 44, amb60: 580 },
            { name: 'Cambridge', ae4hr: 67.9, ae12hr: 729, ae12hrPct: 4.3, attend: 16902, amb30: 39, amb60: 440 },
            { name: 'GSTT', ae4hr: 76.1, ae12hr: 59, ae12hrPct: 0.3, attend: 16995, amb30: 28, amb60: 190 },
            { name: 'Imperial', ae4hr: 75.5, ae12hr: 0, ae12hrPct: 0.0, attend: 23299, amb30: 31, amb60: 280 },
            { name: "King's", ae4hr: 67.5, ae12hr: 1145, ae12hrPct: 4.4, attend: 26110, amb30: 42, amb60: 510 },
            { name: 'Manchester', ae4hr: 71.6, ae12hr: 188, ae12hrPct: 0.4, attend: 45829, amb30: 36, amb60: 340 },
            { name: 'Newcastle', ae4hr: 75.9, ae12hr: 26, ae12hrPct: 0.1, attend: 22017, amb30: 30, amb60: 250 },
            { name: 'Oxford', ae4hr: 77.6, ae12hr: 23, ae12hrPct: 0.1, attend: 19497, amb30: 29, amb60: 210 },
            { name: 'Sheffield', ae4hr: 67.4, ae12hr: 16, ae12hrPct: 0.1, attend: 18745, amb30: 35, amb60: 320 },
            { name: 'UCLH', ae4hr: 69.1, ae12hr: 317, ae12hrPct: 2.3, attend: 13778, amb30: 36, amb60: 350 }
        ];

        function sortAETable(event, sortType) {
            let sorted = [...aeData];
            if (sortType === 'ae4hr') sorted.sort((a, b) => b.ae4hr - a.ae4hr);
            else if (sortType === 'ae12hr') sorted.sort((a, b) => b.ae12hr - a.ae12hr);
            else if (sortType === 'attendances') sorted.sort((a, b) => b.attend - a.attend);
            document.getElementById('aeTableBody').innerHTML = sorted.map(t =>
                '<tr><td class="trust-name">'+t.name+'</td><td>'+t.ae4hr+'%</td><td>'+t.ae12hr.toLocaleString()+'</td><td>'+t.ae12hrPct+'%</td><td>'+(t.attend/1000).toFixed(1)+'k</td></tr>'
            ).join('');
            document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) event.target.classList.add('active');
        }
        sortAETable(null, 'alpha');

        // 4hr trend: Feb-Dec 25 from NHS England Acute Provider Time Series, Jan 26 from A&E Attendances file
        new Chart(document.getElementById('aeTrendsChart'), { type: 'line', data: { labels: ['Feb 25','Mar 25','Apr 25','May 25','Jun 25','Jul 25','Aug 25','Sep 25','Oct 25','Nov 25','Dec 25','Jan 26'], datasets: [{ label: 'Shelford Average', data: [71.7,72.7,72.5,73.3,74.4,74.9,74.2,72.6,73.4,73.0,72.8,71.0], borderColor: '#007B7F', backgroundColor: 'rgba(0,123,127,0.1)', tension: 0.4, fill: true },{ label: 'National Average', data: [73.5,75.0,74.8,75.4,75.6,76.4,75.9,75.1,74.1,74.2,73.8,72.5], borderColor: '#94A3B8', backgroundColor: 'rgba(148,163,184,0.1)', tension: 0.4, fill: true },{ label: 'NHS Target (95%)', data: [95,95,95,95,95,95,95,95,95,95,95,95], borderColor: '#10B981', borderDash: [5,5], borderWidth: 2, pointRadius: 0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } }, scales: { y: { beginAtZero: false, min: 60, max: 100, ticks: { callback: v => v+'%' } } } } });

        // Attendances by trust - January 2026 snapshot (from A&E Attendances file)
        const trustNames = ['Birmingham','Cambridge','GSTT','Imperial',"King's",'Manchester','Newcastle','Oxford','Sheffield','UCLH'];
        const trustColors = ['#007B7F','#1A8B8F','#339B9F','#5AABAF','#75BBBF','#6A9A87','#4A6A5F','#2F4F47','#1F3F37','#8FB0A3'];
        const attendJan26 = [37394,16902,16995,23299,26110,45829,22017,19497,18745,13778];
        new Chart(document.getElementById('attendancesChart'), { type: 'bar', data: { labels: trustNames, datasets: [{ label: 'Total Attendances (Jan 26)', data: attendJan26, backgroundColor: trustColors, borderRadius: 6 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: item => item.parsed.y.toLocaleString()+' attendances' } } }, scales: { y: { beginAtZero: true, ticks: { callback: v => (v/1000).toFixed(0)+'k' } } } } });

        // 12hr DTA waits by trust - January 2026 (from A&E Attendances file)
        const wait12hrData = { labels: trustNames, absolute: [2076,729,59,0,1145,188,26,23,16,317], percent: [5.6,4.3,0.3,0.0,4.4,0.4,0.1,0.1,0.1,2.3] };
        let wait12hrChart = new Chart(document.getElementById('wait12hrChart'), { type: 'bar', data: { labels: wait12hrData.labels, datasets: [{ label: '12-Hour Waits', data: wait12hrData.absolute, backgroundColor: '#007B7F', borderRadius: 6 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => ctx.parsed.y.toLocaleString()+' patients ('+wait12hrData.percent[ctx.dataIndex]+'%)' } } }, scales: { y: { beginAtZero: true, ticks: { callback: v => v.toLocaleString() } } } } });
        function sort12HrChart(event, sortType) {
            let indices = wait12hrData.labels.map((_,i) => i);
            if (sortType === 'absolute') indices.sort((a,b) => wait12hrData.absolute[b] - wait12hrData.absolute[a]);
            else if (sortType === 'percent') indices.sort((a,b) => wait12hrData.percent[b] - wait12hrData.percent[a]);
            wait12hrChart.data.labels = indices.map(i => wait12hrData.labels[i]);
            wait12hrChart.data.datasets[0].data = indices.map(i => wait12hrData.absolute[i]);
            wait12hrChart.update();
        }


        // 12hr A&E waits trend (% of attendances >12hrs arrival to departure)
        // Feb-Dec 25 from NHS England Acute Provider Time Series. Note: this is a different metric
        // from the >12hr DTA waits in the trust table above (which counts decision-to-admit waits only).
        new Chart(document.getElementById('wait12hrTrendChart'), { type: 'line', data: { labels: ['Feb 25','Mar 25','Apr 25','May 25','Jun 25','Jul 25','Aug 25','Sep 25','Oct 25','Nov 25','Dec 25'], datasets: [{ label: 'Shelford 12-Hour Waits (%)', data: [7.7,6.4,6.4,6.0,5.9,5.6,5.9,6.8,7.0,6.7,6.8], borderColor: '#007B7F', backgroundColor: 'rgba(0,123,127,0.2)', tension: 0.4, fill: true },{ label: 'England 12-Hour Waits (%)', data: [11.4,9.9,10.1,9.4,8.9,8.3,8.9,9.8,10.7,10.1,10.5], borderColor: '#94A3B8', backgroundColor: 'rgba(148,163,184,0.1)', tension: 0.4, fill: true }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } }, scales: { y: { beginAtZero: true, ticks: { callback: v => v+'%' } } } } });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancer Services - Shelford Group Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --shelford-teal: #007B7F;
            --shelford-dark-teal: #005A5D;
            --shelford-sage: #5B7F6C;
            --shelford-cream: #FDFBF7;
            --text-dark: #1A1A1A;
            --text-mid: #4A4A4A;
            --border-light: #E5E5E5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--shelford-cream);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 3px solid var(--shelford-teal);
        }

        .logo-link { display: inline-block; }
        .logo {
            width: 120px;
            height: auto;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--shelford-dark-teal);
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-mid);
            margin-top: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            color: var(--shelford-dark-teal);
            margin: 3rem 0 1rem 0;
            font-weight: 600;
        }

        h3 {
            font-size: 1.3rem;
            color: var(--shelford-dark-teal);
            margin: 1rem 0;
        }

        .source-note {
            font-size: 0.9rem;
            color: var(--text-mid);
            margin-top: 0.5rem;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        nav {
            background: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
        }

        nav a {
            color: var(--shelford-teal);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            transition: all 0.2s;
            display: inline-block;
        }

        nav a:hover {
            background: rgba(0, 123, 127, 0.1);
            border-radius: 6px;
        }

        nav a.active {
            color: var(--shelford-dark-teal);
            background: rgba(0, 123, 127, 0.1);
            border-radius: 6px;
            font-weight: 600;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .metric-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            border-left: 4px solid var(--shelford-teal);
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-mid);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .metric-value {
            font-size: 2.5rem;
            color: var(--shelford-dark-teal);
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .metric-benchmark {
            font-size: 0.85rem;
            color: var(--text-mid);
        }

        .table-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            margin-bottom: 3rem;
            overflow-x: auto;
        }

        .sort-buttons {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .sort-btn {
            padding: 0.5rem 1rem;
            background: var(--shelford-teal);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .sort-btn:hover {
            background: var(--shelford-dark-teal);
        }

        .sort-btn.active {
            background: var(--shelford-dark-teal);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: var(--shelford-teal);
            color: white;
        }

        th {
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        tbody tr:hover {
            background: rgba(0, 123, 127, 0.05);
        }

        .trust-name {
            font-weight: 500;
            color: var(--text-dark);
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 123, 127, 0.08);
            margin-bottom: 3rem;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            margin-top: 1rem;
        }

        .chart-controls {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .chart-btn {
            padding: 0.5rem 1rem;
            background: var(--shelford-teal);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .chart-btn:hover {
            background: var(--shelford-dark-teal);
        }

        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-light);
            text-align: center;
            color: var(--text-mid);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .metric-value {
                font-size: 2rem;
            }

            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="logo-link"><img src="shelford-logo.jpg" alt="Shelford Group" class="logo"></a>
            <div>
                <h1>Cancer Services</h1>
                <p class="subtitle">Detailed metrics on cancer waiting times and treatment pathways</p>
            </div>
        </header>

        <nav>
            <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                <a href="index.html">Overview</a>
                <a href="rtt-detail.html">RTT & Elective Care</a>
                <a href="ae-detail.html">A&E & Urgent Care</a>
                <a href="cancer-detail.html" class="active">Cancer Services</a>
                <a href="quality-detail.html">Patient Safety & Quality</a>
                <a href="capacity-detail.html">Capacity &amp; Beds</a>
                <a href="workforce-detail.html">Workforce</a><a href="research-detail.html">Research &amp; Clinical Trials</a><a href="productivity-detail.html">Productivity</a>
            </div>
        </nav>

        <!-- Key Metrics -->
        <h2>Cancer Waiting Times Summary</h2>
        <p class="source-note">Source: NHS England Cancer Waiting Times Statistics, December 2025 (provisional, published 12 February 2026)</p>
        <div class="dashboard-grid">
            <div class="metric-card">
                <div class="metric-label">Two Week Wait (Suspected Cancer)</div>
                <div class="metric-value">83.0%</div>
                <div class="metric-benchmark">Standard: 93% | Shelford average, Dec 2025</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">28-Day Faster Diagnosis</div>
                <div class="metric-value">79.5%</div>
                <div class="metric-benchmark">Standard: 75% | Shelford average, Dec 2025 · England: 77.4%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">31-Day First Treatment</div>
                <div class="metric-value">88.9%</div>
                <div class="metric-benchmark">Standard: 96% | Shelford average, Dec 2025 · England: 92.5%</div>
            </div>
            <div class="metric-card">
                <div class="metric-label">62-Day GP Referral to Treatment</div>
                <div class="metric-value">68.3%</div>
                <div class="metric-benchmark">Standard: 85% | Shelford average, Dec 2025 · England: 71.9%</div>
            </div>
        </div>

        <!-- Detailed Performance Table -->
        <h2>Trust-Level Cancer Performance</h2>
        <p class="source-note">Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), December 2025 (published 12 February 2026)</p>
        <div class="table-container">
            <div class="sort-buttons">
                <button class="sort-btn active" onclick="sortCancerTable('alpha', event)">A-Z</button>
                <button class="sort-btn" onclick="sortCancerTable('twoWeek', event)">Sort by 2WW</button>
                <button class="sort-btn" onclick="sortCancerTable('fds', event)">Sort by 28-Day FDS</button>
                <button class="sort-btn" onclick="sortCancerTable('thirtyOne', event)">Sort by 31-Day</button>
                <button class="sort-btn" onclick="sortCancerTable('sixtyTwo', event)">Sort by 62-Day</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Trust</th>
                        <th>2WW %</th>
                        <th>28-Day FDS %</th>
                        <th>31-Day %</th>
                        <th>62-Day %</th>
                    </tr>
                </thead>
                <tbody id="cancerTableBody">
                    <!-- Populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Two Week Wait by Trust -->
        <div class="chart-container">
            <h3>Two Week Wait Performance by Trust</h3>
            <p class="source-note">Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), December 2025. Standard: 93%.</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortTwoWeekChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortTwoWeekChart('highest')">Highest to Lowest</button>
                <button class="chart-btn" onclick="sortTwoWeekChart('lowest')">Lowest to Highest</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="twoWeekChart"></canvas>
            </div>
        </div>

        <!-- 28-Day Faster Diagnosis Standard -->
        <div class="chart-container">
            <h3>28-Day Faster Diagnosis Standard by Trust</h3>
            <p class="source-note">Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), December 2025. Standard: 75%.</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortFDSChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortFDSChart('highest')">Highest to Lowest</button>
                <button class="chart-btn" onclick="sortFDSChart('lowest')">Lowest to Highest</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="fdsChart"></canvas>
            </div>
        </div>

        <!-- 62-Day GP Referral to Treatment -->
        <div class="chart-container">
            <h3>62-Day GP Referral to First Treatment by Trust</h3>
            <p class="source-note">Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), December 2025. Standard: 85%.</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortSixtyTwoChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortSixtyTwoChart('highest')">Highest to Lowest</button>
                <button class="chart-btn" onclick="sortSixtyTwoChart('lowest')">Lowest to Highest</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="sixtyTwoChart"></canvas>
            </div>
        </div>

        <!-- Cancer Waiting Times Trends -->
        <div class="chart-container">
            <h3>62-Day Standard Trends (12 Months)</h3>
            <p class="source-note">Source: NHS England Acute Provider Time Series, December 2024 – December 2025 (published 12 February 2026)</p>
            <div class="chart-wrapper">
                <canvas id="cancerTrendChart"></canvas>
            </div>
        </div>

        <!-- 31-Day Sub-Standards -->
        <div class="chart-container">
            <h3>31-Day Treatment Standards by Trust</h3>
            <p class="source-note">Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), December 2025. Shows surgery, drug and radiotherapy sub-standards.</p>
            <div class="chart-controls">
                <button class="chart-btn" onclick="sortThirtyOneChart('alpha')">A-Z</button>
                <button class="chart-btn" onclick="sortThirtyOneChart('surgery')">Sort by Surgery</button>
                <button class="chart-btn" onclick="sortThirtyOneChart('drug')">Sort by Drug</button>
            </div>
            <div class="chart-wrapper">
                <canvas id="thirtyOneChart"></canvas>
            </div>
        </div>

        <!-- Two Week Wait Trends -->
        <div class="chart-container">
            <h3>28-Day Faster Diagnosis Standard Trends (13 Months)</h3>
            <p class="source-note">Source: NHS England Acute Provider Time Series, December 2024 – December 2025 (published 12 February 2026). Two-week wait trend unavailable from this source.</p>
            <div class="chart-wrapper">
                <canvas id="twwTrendChart"></canvas>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 Shelford Group | Data updated February 2026</p>
        </footer>
    </div>

    <script>
        // Cancer Performance Data - December 2025
        // Source: NHS England Cancer Waiting Times Monthly Combined Workbook (Provisional), published 12 Feb 2026
        // 2WW from Referrals Seen sheet; FDS/31D/62D from Provider Level Performance sheet
        const cancerData = [
            { name: 'Birmingham', twoWeek: 81.8, fds: 83.4, thirtyOne: 90.9, sixtyTwo: 68.6, surg: 79.1, drug: 98.1, radio: 96.4 },
            { name: 'Cambridge', twoWeek: 72.2, fds: 85.5, thirtyOne: 78.6, sixtyTwo: 74.0, surg: 78.6, drug: 100.0, radio: 59.6 },
            { name: 'GSTT', twoWeek: 92.9, fds: 82.2, thirtyOne: 90.5, sixtyTwo: 63.6, surg: 82.7, drug: 97.6, radio: 90.2 },
            { name: 'Imperial', twoWeek: 82.1, fds: 82.5, thirtyOne: 97.5, sixtyTwo: 70.6, surg: 92.6, drug: 100.0, radio: 98.0 },
            { name: "King's", twoWeek: 85.7, fds: 74.9, thirtyOne: 95.6, sixtyTwo: 65.2, surg: 91.0, drug: 100.0, radio: null },
            { name: 'Manchester', twoWeek: 93.6, fds: 80.3, thirtyOne: 90.6, sixtyTwo: 73.3, surg: 88.1, drug: 96.6, radio: null },
            { name: 'Newcastle', twoWeek: 74.8, fds: 67.7, thirtyOne: 91.9, sixtyTwo: 73.4, surg: 82.3, drug: 99.7, radio: 94.7 },
            { name: 'Oxford', twoWeek: 72.3, fds: 80.4, thirtyOne: 78.6, sixtyTwo: 67.5, surg: 79.0, drug: 95.7, radio: 59.8 },
            { name: 'Sheffield', twoWeek: 88.1, fds: 75.2, thirtyOne: 78.8, sixtyTwo: 50.5, surg: 68.4, drug: 95.2, radio: 63.3 },
            { name: 'UCLH', twoWeek: 86.4, fds: 82.9, thirtyOne: 96.1, sixtyTwo: 76.7, surg: 95.8, drug: 100.0, radio: 97.8 }
        ];

        // Sort cancer table
        function sortCancerTable(sortType, e) {
            let sorted = [...cancerData];
            
            if (sortType === 'twoWeek') {
                sorted.sort((a, b) => b.twoWeek - a.twoWeek); // Higher is better
            } else if (sortType === 'fds') {
                sorted.sort((a, b) => b.fds - a.fds);
            } else if (sortType === 'thirtyOne') {
                sorted.sort((a, b) => b.thirtyOne - a.thirtyOne);
            } else if (sortType === 'sixtyTwo') {
                sorted.sort((a, b) => b.sixtyTwo - a.sixtyTwo);
            }
            
            const tbody = document.getElementById('cancerTableBody');
            tbody.innerHTML = sorted.map(trust => `
                <tr>
                    <td class="trust-name">${trust.name}</td>
                    <td>${trust.twoWeek}%</td>
                    <td>${trust.fds}%</td>
                    <td>${trust.thirtyOne}%</td>
                    <td>${trust.sixtyTwo}%</td>
                </tr>
            `).join('');
            
            if (e) {
                document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
            }
        }

        // Initialize table
        sortCancerTable('alpha', null);

        // Two Week Wait Chart
        const twwData = {
            labels: cancerData.map(d => d.name),
            values: cancerData.map(d => d.twoWeek)
        };

        let twoWeekChart = new Chart(document.getElementById('twoWeekChart'), {
            type: 'bar',
            data: {
                labels: twwData.labels,
                datasets: [{
                    label: '2WW %',
                    data: twwData.values,
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortTwoWeekChart(sortType) {
            let indices = twwData.labels.map((_, i) => i);
            
            if (sortType === 'highest') {
                indices.sort((a, b) => twwData.values[b] - twwData.values[a]);
            } else if (sortType === 'lowest') {
                indices.sort((a, b) => twwData.values[a] - twwData.values[b]);
            }
            
            twoWeekChart.data.labels = indices.map(i => twwData.labels[i]);
            twoWeekChart.data.datasets[0].data = indices.map(i => twwData.values[i]);
            twoWeekChart.update();
        }

        // 28-Day Faster Diagnosis Standard Chart
        const fdsData = {
            labels: cancerData.map(d => d.name),
            values: cancerData.map(d => d.fds)
        };

        let fdsChart = new Chart(document.getElementById('fdsChart'), {
            type: 'bar',
            data: {
                labels: fdsData.labels,
                datasets: [{
                    label: '28-Day FDS %',
                    data: fdsData.values,
                    backgroundColor: '#5B7F6C',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 55,
                        max: 85,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortFDSChart(sortType) {
            let indices = fdsData.labels.map((_, i) => i);
            
            if (sortType === 'highest') {
                indices.sort((a, b) => fdsData.values[b] - fdsData.values[a]);
            } else if (sortType === 'lowest') {
                indices.sort((a, b) => fdsData.values[a] - fdsData.values[b]);
            }
            
            fdsChart.data.labels = indices.map(i => fdsData.labels[i]);
            fdsChart.data.datasets[0].data = indices.map(i => fdsData.values[i]);
            fdsChart.update();
        }

        // 62-Day GP Referral to Treatment Chart
        const sixtyTwoData = {
            labels: cancerData.map(d => d.name),
            values: cancerData.map(d => d.sixtyTwo)
        };

        let sixtyTwoChart = new Chart(document.getElementById('sixtyTwoChart'), {
            type: 'bar',
            data: {
                labels: sixtyTwoData.labels,
                datasets: [{
                    label: '62-Day %',
                    data: sixtyTwoData.values,
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 45,
                        max: 85,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortSixtyTwoChart(sortType) {
            let indices = sixtyTwoData.labels.map((_, i) => i);
            
            if (sortType === 'highest') {
                indices.sort((a, b) => sixtyTwoData.values[b] - sixtyTwoData.values[a]);
            } else if (sortType === 'lowest') {
                indices.sort((a, b) => sixtyTwoData.values[a] - sixtyTwoData.values[b]);
            }
            
            sixtyTwoChart.data.labels = indices.map(i => sixtyTwoData.labels[i]);
            sixtyTwoChart.data.datasets[0].data = indices.map(i => sixtyTwoData.values[i]);
            sixtyTwoChart.update();
        }

        // 62-Day Trends (13 months) - all data from NHS England Acute Provider Time Series
        new Chart(document.getElementById('cancerTrendChart'), {
            type: 'line',
            data: {
                labels: ['Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25'],
                datasets: [{
                    label: 'Shelford Average (62-Day)',
                    data: [67.0, 61.3, 61.3, 65.8, 65.3, 62.8, 63.0, 63.5, 65.1, 63.8, 63.3, 65.5, 68.3],
                    borderColor: '#007B7F',
                    backgroundColor: 'rgba(0, 123, 127, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'National Average (62-Day)',
                    data: [71.7, 67.6, 67.2, 71.4, 70.1, 68.1, 67.3, 69.5, 69.3, 68.0, 68.8, 70.2, 71.9],
                    borderColor: '#94A3B8',
                    backgroundColor: 'rgba(148, 163, 184, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'Standard (85%)',
                    data: [85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85],
                    borderColor: '#EF4444',
                    borderDash: [5, 5],
                    borderWidth: 2,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 50,
                        max: 90,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // 31-Day Treatment Sub-Standards Chart
        const thirtyOneSubData = {
            labels: cancerData.map(d => d.name),
            surgery: cancerData.map(d => d.surg),
            drug: cancerData.map(d => d.drug),
            radio: cancerData.map(d => d.radio)
        };

        let thirtyOneChart = new Chart(document.getElementById('thirtyOneChart'), {
            type: 'bar',
            data: {
                labels: thirtyOneSubData.labels,
                datasets: [{
                    label: '31-Day Surgery %',
                    data: thirtyOneSubData.surgery,
                    backgroundColor: '#007B7F',
                    borderRadius: 6
                }, {
                    label: '31-Day Drug %',
                    data: thirtyOneSubData.drug,
                    backgroundColor: '#5B7F6C',
                    borderRadius: 6
                }, {
                    label: '31-Day Radiotherapy %',
                    data: thirtyOneSubData.radio,
                    backgroundColor: '#94A3B8',
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 50,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        function sortThirtyOneChart(sortType) {
            let indices = thirtyOneSubData.labels.map((_, i) => i);
            
            if (sortType === 'surgery') {
                indices.sort((a, b) => thirtyOneSubData.surgery[a] - thirtyOneSubData.surgery[b]);
            } else if (sortType === 'drug') {
                indices.sort((a, b) => thirtyOneSubData.drug[a] - thirtyOneSubData.drug[b]);
            }
            
            thirtyOneChart.data.labels = indices.map(i => thirtyOneSubData.labels[i]);
            thirtyOneChart.data.datasets[0].data = indices.map(i => thirtyOneSubData.surgery[i]);
            thirtyOneChart.data.datasets[1].data = indices.map(i => thirtyOneSubData.drug[i]);
            thirtyOneChart.data.datasets[2].data = indices.map(i => thirtyOneSubData.radio[i]);
            thirtyOneChart.update();
        }

        // Two Week Wait & FDS Trends
        new Chart(document.getElementById('twwTrendChart'), {
            type: 'line',
            data: {
                labels: ['Dec 24', 'Jan 25', 'Feb 25', 'Mar 25', 'Apr 25', 'May 25', 'Jun 25', 'Jul 25', 'Aug 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dec 25'],
                datasets: [{
                    label: 'FDS (Shelford Average)',
                    data: [78.8, 74.3, 81.4, 80.1, 78.0, 76.4, 77.6, 77.3, 76.6, 75.2, 78.2, 79.1, 79.5],
                    borderColor: '#007B7F',
                    backgroundColor: 'rgba(0, 123, 127, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'FDS (National Average)',
                    data: [78.0, 73.4, 80.2, 79.0, 76.7, 74.8, 76.8, 76.5, 74.6, 73.8, 76.1, 76.5, 77.4],
                    borderColor: '#94A3B8',
                    backgroundColor: 'rgba(148, 163, 184, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'FDS Standard (75%)',
                    data: [75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75, 75],
                    borderColor: '#F59E0B',
                    borderDash: [5, 5],
                    borderWidth: 2,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 60,
                        max: 100,
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
